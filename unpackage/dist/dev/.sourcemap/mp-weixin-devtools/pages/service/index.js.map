{"version":3,"names":["app","getApp","service","common_vendor","ref","hospital_index","hospitals","order","reactive","price","starttime","tel","demand","address","userName","cityName","countyName","detailInfo","receiveAddress","personInfo","name","age","mobile","sex","cfg","page_xy","page_fw","is_xieyi","popup","validMobile","validCode","phone","countdown","validText","time","onLoad","option","getServiceDetail","svid","hid","globalData","utils","request","url","data","success","res","value","hospitalsData","toRaw","i","length","hosI","id","_hosI$service_price","service_price","handleServiceTap","onHospitalChange","e","_hospitals$value$chan","changeIndex","parseInt","detail","onStartTimeChanged","goSelectPerson","index","navigateTo","userReceiveInfo","$on","onAddressChange","chooseAddress","__f__","fail","err","onXieyiChange","orderData","submit","showToast","title","duration","icon","serviceData","personInfoData","stype","hospital_id","hospital_name","client","service_code","code","service_id","service_name","service_stype","getStorageSync","open","createOrder","flag","countdownChange","timer","setInterval","clearInterval","concat","method","msg","cancal","close","ok","setStorageSync","token","wx","createPage","_sfc_main"],"sources":["index.vue","index.vue?type=page"],"sourcesContent":["<template>\r\n\t<view>\r\n\t\t<!-- 进度条 -->\r\n\t\t<view class=\"od-banner\">\r\n\t\t\t<image class=\"od-banner-icon\" src=\"/static/resource/images/od_bg_icon.png\" mode=\"widthFix\" />\r\n\t\t\t<view class=\"od-jd od-jd-0\">\r\n\t\t\t\t<view class=\"od-jd-out\">\r\n\t\t\t\t\t<view class=\"od-jd-in\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"vp-flex od-jd-text\">\r\n\t\t\t\t\t<view class=\"vp-flex_1\">\r\n\t\t\t\t\t\t<text class=\"od-jd-st-0\">填写订单</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"vp-flex_1\">\r\n\t\t\t\t\t\t<text class=\"od-jd-st-10\">在线支付</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"vp-flex_1\">\r\n\t\t\t\t\t\t<text class=\"od-jd-st-20\">专人服务</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"vp-flex_1\">\r\n\t\t\t\t\t\t<text class=\"od-jd-st-30\">服务完成</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 快捷窗口名称和标题 -->\r\n\t\t<view class=\"pub-box\">\r\n\t\t\t<view class=\"pub-box-bd\">\r\n\t\t\t\t<view class=\"weui-cell weui-cell_input\">\r\n\t\t\t\t\t<view class=\"weui-cell__hd\">\r\n\t\t\t\t\t\t<image class=\"serv-icon\"\r\n\t\t\t\t\t\t\t:src=\"service.icon_image ? service.icon_image_url : '../../static/resource/images/avatar.jpg'\"\r\n\t\t\t\t\t\t\tmode='widthFix' />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"weui-cell__bd\">\r\n\t\t\t\t\t\t<text class=\"serv-name\">{{ service.name }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"weui-cell__ft\">\r\n\t\t\t\t\t\t<view class=\"f5 ic_info\" @click=\"handleServiceTap\">服务内容</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\r\n\t\t<!-- 非代跑取药的，例如尊享陪诊 -->\r\n\t\t<block v-if=\"hospitals.length > 0 && service.stype == '10' || service.stype == '15'\t|| service.stype == '20' \">\r\n\t\t\t<view class=\"pub-box\">\r\n\t\t\t\t<view class=\"pub-box-bd\">\r\n\t\t\t\t\t<!-- 就诊医院 -->\r\n\t\t\t\t\t<view class=\"weui-cell weui-cell_input\">\r\n\t\t\t\t\t\t<view class=\"weui-cell__hd\" style=\"display: flex;width: 100%;\">\r\n\t\t\t\t\t\t\t<view class=\"weui-label\">\r\n\t\t\t\t\t\t\t\t就诊医院\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"weui-cell__bd\">\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"weui-cell__ft weui-cell__ft_in-access\">\r\n\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t<picker @change=\"onHospitalChange\" :value=\"hospital_index\" :range=\"hospitals\"\r\n\t\t\t\t\t\t\t\t\t\trange-key=\"name\">\r\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" :disabled=\"true\" placeholder=\"请选择要就诊的医院\"\r\n\t\t\t\t\t\t\t\t\t\t\t:value=\"hospitals[hospital_index].name\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder-class=\"vp-placeholder\" />\r\n\t\t\t\t\t\t\t\t\t</picker>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- 就诊时间 -->\r\n\t\t\t\t\t<view class=\"weui-cell weui-cell_input\">\r\n\t\t\t\t\t\t<view class=\"weui-cell__hd\" style=\"display: flex;width: 100%;\">\r\n\t\t\t\t\t\t\t<view class=\"weui-label\">\r\n\t\t\t\t\t\t\t\t就诊时间\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"weui-cell__bd\">\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"weui-cell__ft weui-cell__ft_in-access\">\r\n\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t<dtPicker @dtPickerChanged=\"onStartTimeChanged\" :timestamp=\"order.starttime\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"请选择就诊时间\"></dtPicker>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- 就诊人 -->\r\n\t\t\t\t\t<view class=\"weui-cell weui-cell_input\" @click=\"goSelectPerson\">\r\n\t\t\t\t\t\t<view class=\"weui-cell__hd\" style=\"display: flex;width: 100%;\">\r\n\t\t\t\t\t\t\t<view class=\"weui-label\">\r\n\t\t\t\t\t\t\t\t就诊人\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"weui-cell__bd\">\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"weui-cell__ft weui-cell__ft_in-access\">\r\n\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"weui-input\" :value=\"personInfo.name\" placeholder=\"请选择就诊人\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder-class=\"vp-placeholder\" :disabled=\"true\"\r\n\t\t\t\t\t\t\t\t\t\tstyle=\"text-align: right;\" />\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- 接送地址 -->\r\n\t\t\t\t\t<block v-if=\"service.stype == 15\">\r\n\t\t\t\t\t\t<view class=\"weui-cell weui-cell_input\">\r\n\t\t\t\t\t\t\t<view class=\"weui-cell__hd\">接送地址</view>\r\n\t\t\t\t\t\t\t<view class=\"weui-cell__bd\">\r\n\t\t\t\t\t\t\t\t<input class=\"weui-input\" name=\"receiveAddress\" style=\"text-align: right\"\r\n\t\t\t\t\t\t\t\t\tplaceholder-class=\"vp-placeholder\" placeholder=\"请填写就诊人所在地址\"\r\n\t\t\t\t\t\t\t\t\tv-model=\"order.receiveAddress\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</block>\r\n\r\n\t\t\t\t\t<!-- 联系电话 -->\r\n\t\t\t\t\t<view class=\"weui-cell weui-cell_input\">\r\n\t\t\t\t\t\t<view class=\"weui-cell__hd\">联系电话</view>\r\n\t\t\t\t\t\t<view class=\"weui-cell__bd\">\r\n\t\t\t\t\t\t\t<input class=\"weui-input\" type=\"number\" name=\"tel\" style=\"text-align: right\"\r\n\t\t\t\t\t\t\t\tplaceholder-class=\"vp-placeholder\" placeholder=\"请填写您的联系电话\" v-model=\"order.tel\" />\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"pub-box\">\r\n\t\t\t\t<view class=\"pub-box-tt\">服务需求</view>\r\n\t\t\t\t<view class=\"pub-box-bd\">\r\n\t\t\t\t\t<view class=\"weui-cell weui-cell_input\">\r\n\t\t\t\t\t\t<view class=\"weui-cell__bd\">\r\n\t\t\t\t\t\t\t<textarea name=\"demand\" auto-height placeholder=\"请简单描述您要就诊的科室..\"\r\n\t\t\t\t\t\t\t\tplaceholder-class=\"vp-placeholder\" style=\"min-height: 150rpx\" v-model=\"order.demand\" />\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</block>\r\n\r\n\t\t<!-- 代跑取药的 -->\r\n\t\t<block v-if=\"hospitals.length > 0 && service.stype == '30' || service.stype == '40'\t \">\r\n\t\t\t<view class=\"pub-box\">\r\n\t\t\t\t<view class=\"pub-box-bd\">\r\n\t\t\t\t\t<view class=\"weui-cell weui-cell_input\">\r\n\t\t\t\t\t\t<view class=\"weui-cell__hd\">\r\n\t\t\t\t\t\t\t<view class=\"weui-label\">所在医院</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"weui-cell__bd\"></view>\r\n\t\t\t\t\t\t<view class=\"weui-cell__ft weui-cell__ft_in-access\">\r\n\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t<picker @change=\"onHospitalChange\" :value=\"hospital_index\" :range=\"hospitals\"\r\n\t\t\t\t\t\t\t\t\trange-key=\"name\">\r\n\t\t\t\t\t\t\t\t\t<input type=\"text\" :disabled=\"true\" placeholder=\"请选择就诊所在医院\"\r\n\t\t\t\t\t\t\t\t\t\t:value=\"hospitals[hospital_index].name\" placeholder-class=\"vp-placeholder\" />\r\n\t\t\t\t\t\t\t\t</picker>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"weui-cell weui-cell_input\">\r\n\t\t\t\t\t\t<view class=\"weui-cell__hd\">\r\n\t\t\t\t\t\t\t<view class=\"weui-label\">服务时间</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"weui-cell__bd\"></view>\r\n\t\t\t\t\t\t<view class=\"weui-cell__ft weui-cell__ft_in-access\">\r\n\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t<dtPicker @dtPickerChanged=\"onStartTimeChanged\" :timestamp=\"order.starttime\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"请选择期望服务时间\"></dtPicker>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"weui-cell weui-cell_input\" @click=\"onAddressChange\">\r\n\t\t\t\t\t\t<view class=\"weui-cell__hd\">\r\n\t\t\t\t\t\t\t<view class=\"weui-label\">收件信息</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"weui-cell__bd\"></view>\r\n\t\t\t\t\t\t<view class=\"weui-cell__ft weui-cell__ft_in-access\">\r\n\t\t\t\t\t\t\t<input class=\"weui-input\" :disabled=\"true\" style=\"text-align: right\"\r\n\t\t\t\t\t\t\t\tplaceholder-class=\"vp-placeholder\" placeholder=\"请选择收件信息\" :value=\"userReceiveInfo\" />\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"weui-cell weui-cell_input\">\r\n\t\t\t\t\t\t<view class=\"weui-cell__hd\">联系电话</view>\r\n\t\t\t\t\t\t<view class=\"weui-cell__bd\">\r\n\t\t\t\t\t\t\t<input class=\"weui-input\" type=\"number\" name=\"tel\" style=\"text-align: right\"\r\n\t\t\t\t\t\t\t\tplaceholder-class=\"vp-placeholder\" placeholder=\"请填写您的联系电话\" v-model=\"order.tel\" />\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"pub-box\">\r\n\t\t\t\t<view class=\"pub-box-tt\">服务需求</view>\r\n\t\t\t\t<view class=\"pub-box-bd\">\r\n\t\t\t\t\t<view class=\"weui-cell weui-cell_input\">\r\n\t\t\t\t\t\t<view class=\"weui-cell__bd\">\r\n\t\t\t\t\t\t\t<textarea name=\"demand\" auto-height placeholder=\"请简单描述您要就诊的科室..\"\r\n\t\t\t\t\t\t\t\tplaceholder-class=\"vp-placeholder\" style=\"min-height: 150rpx\" v-model=\"order.demand\" />\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</block>\r\n\r\n\r\n\t\t<view style=\"height: 300rpx\"></view>\r\n\t\t<!-- 悬浮提交按钮 -->\r\n\t\t<view class=\"vp-foot\">\r\n\t\t\t<view style=\"background: #ffffff; padding: 20rpx\">\r\n\t\t\t\t<view class=\"xieyi\" style=\"text-align: center\">\r\n\t\t\t\t\t<text :class=\"'is_xieyi ' + (is_xieyi ? 'is_xieyi_on' : '')\" @click=\"onXieyiChange\">我已阅读并同意</text>\r\n\t\t\t\t\t<navigator :url=\"cfg.page_xy\">《用户协议》</navigator>\r\n\t\t\t\t\t<text>和</text>\r\n\t\t\t\t\t<navigator :url=\"cfg.page_fw\">《服务协议》</navigator>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<button :class=\"'btnp ' + (is_xieyi ? '' : 'btnp-disabled')\" @click=\"submit\">\r\n\t\t\t\t\t\t确认下单\r\n\t\t\t\t\t\t<block v-if=\"order.price > 0\">（支付{{ order.price }}元）</block>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\r\n\t\t<!-- 手机登录弹窗 -->\r\n\t\t<uni-popup ref=\"popup\" type=\"center\" :is-mask-click=\"false\" background-color=\"#fff\">\r\n\t\t\t<view class=\"popup-content\">\r\n\t\t\t\t<view class=\"group\">\r\n\t\t\t\t\t<input class=\"uni-input\" type=\"tel\" v-model=\"validMobile.phone\" placeholder=\"手机号\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"group\">\r\n\t\t\t\t\t<input class=\"uni-input\" v-model=\"validMobile.validCode\" placeholder=\"请输入验证码\" />\r\n\t\t\t\t\t<text class=\"valid-text\" @click=\"countdownChange\">{{countdown.validText}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"btns\">\r\n\t\t\t\t<view class=\"cancal\" @click=\"cancal\">取消</view>\r\n\t\t\t\t<view class=\"ok\" @click=\"ok\">确定</view>\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tonLoad\r\n\t} from \"@dcloudio/uni-app\"\r\n\r\n\timport {\r\n\t\tref,\r\n\t\treactive,\r\n\t\tcomputed,\r\n\t\ttoRaw\r\n\t} from \"vue\"\r\n\r\n\tconst app = getApp() // 获取uniapp实例\r\n\tconst service = ref({}) // 服务内容\r\n\tconst hospital_index = ref(0) // 选中的医院索引\r\n\tconst hospitals = ref([]) // 可选医院数组\r\n\r\n\t// 订单数据\r\n\tconst order = reactive({\r\n\t\tprice: '', // 价格\r\n\t\tstarttime: 0, // 就诊时间\r\n\t\ttel: '', // 联系电话\r\n\t\tdemand: '', // 服务需求\r\n\t\taddress: {\r\n\t\t\tuserName: '',\r\n\t\t\tcityName: '',\r\n\t\t\tcountyName: '',\r\n\t\t\tdetailInfo: ''\r\n\t\t},\r\n\t\treceiveAddress: '', // 接送地址\r\n\t})\r\n\r\n\t// 就诊人信息\r\n\tconst personInfo = ref({\r\n\t\tname: '',\r\n\t\tage: '',\r\n\t\tmobile: '',\r\n\t\tsex: '',\r\n\t})\r\n\r\n\t// 服务协议\r\n\tconst cfg = reactive({\r\n\t\tpage_xy: '',\r\n\t\tpage_fw: ''\r\n\t})\r\n\r\n\t// 默认不勾选协议\r\n\tconst is_xieyi = ref(false)\r\n\r\n\t// 登录弹窗\r\n\tconst popup = ref(null)\r\n\r\n\t// 校验登录信息\r\n\tconst validMobile = ref({\r\n\t\tvalidCode: '', // 验证码\r\n\t\tphone: '', // 手机号\r\n\t})\r\n\r\n\t// 验证码\r\n\tconst countdown = ref({\r\n\t\tvalidText: '获取验证码',\r\n\t\ttime: 60, // 倒计时\r\n\t})\r\n\r\n\tonLoad((option) => {\r\n\t\tgetServiceDetail(option)\r\n\t})\r\n\r\n\t// 获取服务详情\r\n\tconst getServiceDetail = (option) => {\r\n\t\tconst {\r\n\t\t\tsvid,\r\n\t\t\thid\r\n\t\t} = option\r\n\t\tapp.globalData.utils.request({\r\n\t\t\turl: '/Service/order',\r\n\t\t\tdata: {\r\n\t\t\t\tsvid\r\n\t\t\t},\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tservice.value = res.data.service // 服务相关信息\r\n\t\t\t\thospitals.value = res.data.hospitals // 可选医院数组\r\n\r\n\t\t\t\t// 如果当前url中有医院的id，那么从可选医院数组中找出对应的医院名称和价格出来\r\n\t\t\t\tif (option.hid > 0) {\r\n\t\t\t\t\t// 将响应式数组转化为响应式之前的数组，也就是普通数组\r\n\t\t\t\t\tconst hospitalsData = toRaw(hospitals.value)\r\n\t\t\t\t\tfor (let i = 0; i < hospitalsData.length; i++) {\r\n\t\t\t\t\t\tlet hosI = hospitalsData[i]\r\n\t\t\t\t\t\tif (hosI.id == option.hid) {\r\n\t\t\t\t\t\t\thospital_index.value = i; // 选中的索引\r\n\t\t\t\t\t\t\torder.price = hosI.service_price ?? ''; // 医院价格\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// 服务内容\r\n\tconst handleServiceTap = () => {\r\n\r\n\t}\r\n\r\n\t// 监听选择的医院   将用户选中的索引和医院价格更新一下\r\n\tconst onHospitalChange = (e) => {\r\n\t\tconst changeIndex = parseInt(e.detail.value)\r\n\t\thospital_index.value = changeIndex\r\n\t\torder.price = hospitals.value[changeIndex].service_price ?? ''\r\n\t}\r\n\r\n\t// 选择就诊时间\r\n\tconst onStartTimeChanged = (e) => {\r\n\t\torder.starttime = e.detail.value\r\n\t}\r\n\r\n\t// 就诊人\r\n\tconst goSelectPerson = () => {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: '/pages/clients/index?act=select'\r\n\t\t})\r\n\t}\r\n\r\n\t// 用户收货信息\r\n\tconst userReceiveInfo = ref('')\r\n\r\n\t// 触发全局的自定义事件\r\n\tuni.$on('clientChange', (data) => {\r\n\t\tconst {\r\n\t\t\tage,\r\n\t\t\tmobile,\r\n\t\t\tsex,\r\n\t\t\tname\r\n\t\t} = data\r\n\t\tpersonInfo.value.name = name\r\n\t\tpersonInfo.value.mobile = mobile\r\n\t\tpersonInfo.value.sex = sex\r\n\t\tpersonInfo.value.age = age\r\n\t});\r\n\r\n\t// 选择收货地址\r\n\tconst onAddressChange = () => {\r\n\t\tuni.chooseAddress({\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tcityName,\r\n\t\t\t\t\tcountyName,\r\n\t\t\t\t\tdetailInfo,\r\n\t\t\t\t\tuserName\r\n\t\t\t\t} = res\r\n\r\n\t\t\t\tuserReceiveInfo.value = res ? userName + '(' + cityName + countyName + detailInfo + ')' :\r\n\t\t\t\t\t''\r\n\t\t\t\torder.address.userName = userName\r\n\t\t\t\torder.address.cityName = cityName\r\n\t\t\t\torder.address.countyName = countyName\r\n\t\t\t\torder.address.detailInfo = detailInfo\r\n\r\n\t\t\t\tconsole.log(res, 'res');\r\n\t\t\t},\r\n\t\t\tfail: (err) => {\r\n\t\t\t\tconsole.log(err, 'err');\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// 监听协议单选\r\n\tconst onXieyiChange = () => {\r\n\t\tis_xieyi.value = !is_xieyi.value\r\n\t}\r\n\r\n\r\n\t// 支付\r\n\tlet orderData\r\n\tconst submit = () => {\r\n\t\t// 校验 阅读协议按钮\r\n\t\tif (!is_xieyi.value) {\r\n\t\t\treturn uni.showToast({\r\n\t\t\t\ttitle: '请您阅读并同意<用户协议>和服务协议',\r\n\t\t\t\tduration: 1000,\r\n\t\t\t\ticon: ''\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\torderData = toRaw(order) // 返回没响应式的订单对象\r\n\t\tconst serviceData = toRaw(service.value) // 返回没响应式的服务对象\r\n\t\tconst personInfoData = toRaw(personInfo.value) // 返回没响应式的就诊人信息对象\r\n\t\tconst hospitalsData = toRaw(hospitals.value) // 返回没响应式的酒店对象\r\n\r\n\t\tconsole.log('serviceData--->', serviceData);\r\n\t\tif (serviceData) {\r\n\t\t\t// 校验 选择的医院\r\n\t\t\tif (serviceData.stype < 100) {\r\n\t\t\t\t// 如果用户没有选择医院,则请提示\r\n\t\t\t\tif (hospital_index.value == 0) {\r\n\t\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\t\ttitle: '请选择医院',\r\n\t\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\t\ticon: ''\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t// 有则代表有选择医院,则用索引取出选择医院的id和名称\r\n\t\t\t\torderData.hospital_id = hospitalsData[hospital_index.value].id\r\n\t\t\t\torderData.hospital_name = hospitalsData[hospital_index.value].name\r\n\t\t\t}\r\n\r\n\t\t\t// 代跑取药的\r\n\t\t\tif (serviceData.stype == '30' || serviceData.stype == '40') {\r\n\t\t\t\t// 校验 服务时间\r\n\t\t\t\tif (orderData.starttime == 0) {\r\n\t\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\t\ttitle: '请选择服务时间',\r\n\t\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\t\ticon: ''\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 校验 收件信息\r\n\t\t\t\tif (!orderData.address.userName) {\r\n\t\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\t\ttitle: '请选择收件信息',\r\n\t\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\t\ticon: ''\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// 非代跑取药的\r\n\t\t\tif (serviceData.stype == '10' || serviceData.stype == '15' || serviceData.stype == '20') {\r\n\t\t\t\t// 校验 就诊时间\r\n\t\t\t\tif (orderData.starttime == 0) {\r\n\t\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\t\ttitle: '请选择就诊时间',\r\n\t\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\t\ticon: ''\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 校验 选择就诊人\r\n\t\t\t\tif (personInfoData.name == '') {\r\n\t\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\t\ttitle: '请选择就诊人',\r\n\t\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\t\ticon: ''\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 尊享陪诊\r\n\t\t\t\tif (serviceData.stype == '15') {\r\n\t\t\t\t\t// 校验 接送地址\r\n\t\t\t\t\tif (!orderData.receiveAddress) {\r\n\t\t\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\t\t\ttitle: '请填写接送地址',\r\n\t\t\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\t\t\ticon: ''\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\torderData.client = personInfoData // 就诊人\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// ------------  共用的字段 ---------------\r\n\t\t// 校验联系电话\r\n\t\tif (!order.tel) {\r\n\t\t\treturn uni.showToast({\r\n\t\t\t\ttitle: '请填写联系电话',\r\n\t\t\t\tduration: 1000,\r\n\t\t\t\ticon: ''\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\torderData.service_code = serviceData.code // 服务code\r\n\t\torderData.service_id = serviceData.id // 服务id\r\n\t\torderData.service_name = serviceData.name // 服务名称\r\n\t\torderData.service_stype = serviceData.stype // 服务类型\r\n\r\n\t\tconsole.log(orderData, '提交订单的数据');\r\n\r\n\t\t// 上面验证都通过,正式创建订单之前做登录校验,验证用户是否已登录,未登录则显示弹窗,让其去手机号登录\r\n\t\tif (!uni.getStorageSync('token')) {\r\n\t\t\tpopup.value.open('center') // 显示弹窗\r\n\t\t} else {\r\n\t\t\t// 创建订单逻辑\r\n\t\t\tcreateOrder(orderData)\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * 登录弹窗相关\r\n\t */\r\n\t// 登录\r\n\tlet flag = false // 做防抖，flag为true表示正在倒计时，无法点击\r\n\tconst countdownChange = () => {\r\n\t\t// 校验 手机号\r\n\t\tif (!validMobile.value.phone) {\r\n\t\t\treturn uni.showToast({\r\n\t\t\t\ttitle: '请输入手机号',\r\n\t\t\t\tduration: 1000,\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\t// 1.如果flag还开着,带着有定时器,那么直接return出去\r\n\t\tif (flag) return\r\n\r\n\t\t// 2.进来就打开\r\n\t\tflag = true\r\n\r\n\t\t// 3.开启定时器\r\n\t\tconst timer = setInterval(() => {\r\n\t\t\tif (countdown.value.time <= 0) {\r\n\t\t\t\tcountdown.value.validText = '获取验证码'\r\n\t\t\t\tcountdown.value.time = 60\r\n\t\t\t\tclearInterval(timer)\r\n\t\t\t\t// 时间走完要关闭\r\n\t\t\t\tflag = false\r\n\t\t\t} else {\r\n\t\t\t\tcountdown.value.time -= 1\r\n\t\t\t\tcountdown.value.validText = `剩余${countdown.value.time}S`\r\n\t\t\t}\r\n\t\t}, 1000)\r\n\r\n\t\t// 获取验证码\r\n\t\tapp.globalData.utils.request({\r\n\t\t\turl: '/get/code',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tdata: {\r\n\t\t\t\ttel: validMobile.value.phone // 手机号\r\n\t\t\t},\r\n\t\t\tsuccess: res => {\r\n\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '验证码发送成功,请尽快验证!',\r\n\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tfail: res => {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// 取消弹窗\r\n\tconst cancal = () => {\r\n\t\tpopup.value.close() // 关闭弹窗\r\n\t}\r\n\r\n\t// 确认弹窗\r\n\tconst ok = () => {\r\n\t\t// 如果手机号为空 或 验证码为空,则提示用户\r\n\t\tif (!validMobile.value.phone || !validMobile.value.validCode) {\r\n\t\t\treturn uni.showToast({\r\n\t\t\t\ttitle: '请检查输入信息',\r\n\t\t\t\tduration: 1000,\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\t// 验证码验证,正式登录  \r\n\t\tapp.globalData.utils.request({\r\n\t\t\turl: '/user/authentication',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tdata: {\r\n\t\t\t\ttel: validMobile.value.phone, // 手机号\r\n\t\t\t\tcode: validMobile.value.validCode // 验证码\r\n\t\t\t},\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\t// 登录成功将token设置到缓存中\r\n\t\t\t\tuni.setStorageSync('token', res.data.data.token)\r\n\t\t\t\tpopup.value.close() // 关闭弹窗\r\n\t\t\t\t// 接下来正式创建订单\r\n\t\t\t\tcreateOrder(orderData)\r\n\t\t\t},\r\n\t\t\tfail: (res) => {\r\n\t\t\t\tpopup.value.close() // 关闭弹窗\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t@import './index.css';\r\n</style>","import MiniProgramPage from '/Users/daykalif/Desktop/project/pages/service/index.vue'\nwx.createPage(MiniProgramPage)"],"mappings":";;;;;;;;;;;;;;;;;;;;IAmQC,IAAMA,GAAA,GAAMC,MAAA,EAAQ;IACpB,IAAMC,OAAA,GAAUC,aAAA,CAAGC,GAAA,CAAC,EAAE;IACtB,IAAMC,cAAA,GAAiBF,aAAA,CAAGC,GAAA,CAAC,CAAC;IAC5B,IAAME,SAAA,GAAYH,aAAA,CAAGC,GAAA,CAAC,EAAE;IAGxB,IAAMG,KAAA,GAAQJ,aAAA,CAAAK,QAAA,CAAS;MACtBC,KAAA,EAAO;MAAA;MACPC,SAAA,EAAW;MAAA;MACXC,GAAA,EAAK;MAAA;MACLC,MAAA,EAAQ;MAAA;MACRC,OAAA,EAAS;QACRC,QAAA,EAAU;QACVC,QAAA,EAAU;QACVC,UAAA,EAAY;QACZC,UAAA,EAAY;MACZ;MACDC,cAAA,EAAgB;MAAA;IAClB,CAAE;;IAGD,IAAMC,UAAA,GAAahB,aAAA,CAAAC,GAAA,CAAI;MACtBgB,IAAA,EAAM;MACNC,GAAA,EAAK;MACLC,MAAA,EAAQ;MACRC,GAAA,EAAK;IACP,CAAE;IAGD,IAAMC,GAAA,GAAMrB,aAAA,CAAAK,QAAA,CAAS;MACpBiB,OAAA,EAAS;MACTC,OAAA,EAAS;IACX,CAAE;IAGD,IAAMC,QAAA,GAAWxB,aAAA,CAAGC,GAAA,CAAC,KAAK;IAG1B,IAAMwB,KAAA,GAAQzB,aAAA,CAAGC,GAAA,CAAC,IAAI;IAGtB,IAAMyB,WAAA,GAAc1B,aAAA,CAAAC,GAAA,CAAI;MACvB0B,SAAA,EAAW;MAAA;MACXC,KAAA,EAAO;MAAA;IACT,CAAE;;IAGD,IAAMC,SAAA,GAAY7B,aAAA,CAAAC,GAAA,CAAI;MACrB6B,SAAA,EAAW;MACXC,IAAA,EAAM;MAAA;IACR,CAAE;;IAED/B,aAAA,CAAMgC,MAAA,CAAC,UAACC,MAAA,EAAW;MAClBC,gBAAA,CAAiBD,MAAM;IACzB,CAAE;IAGD,IAAMC,gBAAA,GAAmB,SAAnBA,iBAAoBD,MAAA,EAAW;MACpC,IACCE,IAAA,GAEGF,MAAA,CAFHE,IAAA;QACAC,GAAA,GACGH,MAAA,CADHG,GAAA;MAEDvC,GAAA,CAAIwC,UAAA,CAAWC,KAAA,CAAMC,OAAA,CAAQ;QAC5BC,GAAA,EAAK;QACLC,IAAA,EAAM;UACLN,IAAA,EAAAA;QACA;QACDO,OAAA,EAAS,SAAAA,QAACC,GAAA,EAAQ;UACjB5C,OAAA,CAAQ6C,KAAA,GAAQD,GAAA,CAAIF,IAAA,CAAK1C,OAAA;UACzBI,SAAA,CAAUyC,KAAA,GAAQD,GAAA,CAAIF,IAAA,CAAKtC,SAAA;UAG3B,IAAI8B,MAAA,CAAOG,GAAA,GAAM,GAAG;YAEnB,IAAMS,aAAA,GAAgB7C,aAAA,CAAA8C,KAAA,CAAM3C,SAAA,CAAUyC,KAAK;YAC3C,SAASG,CAAA,GAAI,GAAGA,CAAA,GAAIF,aAAA,CAAcG,MAAA,EAAQD,CAAA,IAAK;cAC9C,IAAIE,IAAA,GAAOJ,aAAA,CAAcE,CAAC;cAC1B,IAAIE,IAAA,CAAKC,EAAA,IAAMjB,MAAA,CAAOG,GAAA,EAAK;gBAAA,IAAAe,mBAAA;gBAC1BjD,cAAA,CAAe0C,KAAA,GAAQG,CAAA;gBACvB3C,KAAA,CAAME,KAAA,IAAA6C,mBAAA,GAAQF,IAAA,CAAKG,aAAA,cAAAD,mBAAA,cAAAA,mBAAA,GAAiB;gBACpC;cACA;YACD;UACD;QACD;MACJ,CAAG;IACD;IAGD,IAAME,gBAAA,GAAmB,SAAnBA,iBAAA,EAAyB,CAE9B;IAGD,IAAMC,gBAAA,GAAmB,SAAnBA,iBAAoBC,CAAA,EAAM;MAAA,IAAAC,qBAAA;MAC/B,IAAMC,WAAA,GAAcC,QAAA,CAASH,CAAA,CAAEI,MAAA,CAAOf,KAAK;MAC3C1C,cAAA,CAAe0C,KAAA,GAAQa,WAAA;MACvBrD,KAAA,CAAME,KAAA,IAAAkD,qBAAA,GAAQrD,SAAA,CAAUyC,KAAA,CAAMa,WAAW,EAAEL,aAAA,cAAAI,qBAAA,cAAAA,qBAAA,GAAiB;IAC5D;IAGD,IAAMI,kBAAA,GAAqB,SAArBA,mBAAsBL,CAAA,EAAM;MACjCnD,KAAA,CAAMG,SAAA,GAAYgD,CAAA,CAAEI,MAAA,CAAOf,KAAA;IAC3B;IAGD,IAAMiB,cAAA,GAAiB,SAAjBA,eAAA,EAAuB;MAC5B7D,aAAA,CAAA8D,KAAA,CAAIC,UAAA,CAAW;QACdvB,GAAA,EAAK;MACR,CAAG;IACD;IAGD,IAAMwB,eAAA,GAAkBhE,aAAA,CAAGC,GAAA,CAAC,EAAE;IAG9BD,aAAA,CAAA8D,KAAA,CAAIG,GAAA,CAAI,gBAAgB,UAACxB,IAAA,EAAS;MACjC,IACCvB,GAAA,GAIGuB,IAAA,CAJHvB,GAAA;QACAC,MAAA,GAGGsB,IAAA,CAHHtB,MAAA;QACAC,GAAA,GAEGqB,IAAA,CAFHrB,GAAA;QACAH,IAAA,GACGwB,IAAA,CADHxB,IAAA;MAEDD,UAAA,CAAW4B,KAAA,CAAM3B,IAAA,GAAOA,IAAA;MACxBD,UAAA,CAAW4B,KAAA,CAAMzB,MAAA,GAASA,MAAA;MAC1BH,UAAA,CAAW4B,KAAA,CAAMxB,GAAA,GAAMA,GAAA;MACvBJ,UAAA,CAAW4B,KAAA,CAAM1B,GAAA,GAAMA,GAAA;IACzB,CAAE;IAGD,IAAMgD,eAAA,GAAkB,SAAlBA,gBAAA,EAAwB;MAC7BlE,aAAA,CAAA8D,KAAA,CAAIK,aAAA,CAAc;QACjBzB,OAAA,EAAS,SAAAA,QAACC,GAAA,EAAQ;UACjB,IACC/B,QAAA,GAIG+B,GAAA,CAJH/B,QAAA;YACAC,UAAA,GAGG8B,GAAA,CAHH9B,UAAA;YACAC,UAAA,GAEG6B,GAAA,CAFH7B,UAAA;YACAH,QAAA,GACGgC,GAAA,CADHhC,QAAA;UAGDqD,eAAA,CAAgBpB,KAAA,GAAQD,GAAA,GAAMhC,QAAA,GAAW,MAAMC,QAAA,GAAWC,UAAA,GAAaC,UAAA,GAAa,MACnF;UACDV,KAAA,CAAMM,OAAA,CAAQC,QAAA,GAAWA,QAAA;UACzBP,KAAA,CAAMM,OAAA,CAAQE,QAAA,GAAWA,QAAA;UACzBR,KAAA,CAAMM,OAAA,CAAQG,UAAA,GAAaA,UAAA;UAC3BT,KAAA,CAAMM,OAAA,CAAQI,UAAA,GAAaA,UAAA;UAE3Bd,aAAA,CAAY8D,KAAA,CAAAM,KAAA,0CAAAzB,GAAA,EAAK,KAAK;QACtB;QACD0B,IAAA,EAAM,SAAAA,KAACC,GAAA,EAAQ;UACdtE,aAAA,CAAY8D,KAAA,CAAAM,KAAA,0CAAAE,GAAA,EAAK,KAAK;QACtB;MACJ,CAAG;IACD;IAGD,IAAMC,aAAA,GAAgB,SAAhBA,cAAA,EAAsB;MAC3B/C,QAAA,CAASoB,KAAA,GAAQ,CAACpB,QAAA,CAASoB,KAAA;IAC3B;IAID,IAAI4B,SAAA;IACJ,IAAMC,MAAA,GAAS,SAATA,OAAA,EAAe;MAEpB,IAAI,CAACjD,QAAA,CAASoB,KAAA,EAAO;QACpB,OAAO5C,aAAA,CAAA8D,KAAA,CAAIY,SAAA,CAAU;UACpBC,KAAA,EAAO;UACPC,QAAA,EAAU;UACVC,IAAA,EAAM;QACV,CAAI;MACD;MAEDL,SAAA,GAAYxE,aAAA,CAAK8C,KAAA,CAAC1C,KAAK;MACvB,IAAM0E,WAAA,GAAc9E,aAAA,CAAA8C,KAAA,CAAM/C,OAAA,CAAQ6C,KAAK;MACvC,IAAMmC,cAAA,GAAiB/E,aAAA,CAAA8C,KAAA,CAAM9B,UAAA,CAAW4B,KAAK;MAC7C,IAAMC,aAAA,GAAgB7C,aAAA,CAAA8C,KAAA,CAAM3C,SAAA,CAAUyC,KAAK;MAE3C5C,aAAA,CAAA8D,KAAA,CAAAM,KAAA,0CAAY,mBAAmBU,WAAW;MAC1C,IAAIA,WAAA,EAAa;QAEhB,IAAIA,WAAA,CAAYE,KAAA,GAAQ,KAAK;UAE5B,IAAI9E,cAAA,CAAe0C,KAAA,IAAS,GAAG;YAC9B,OAAO5C,aAAA,CAAA8D,KAAA,CAAIY,SAAA,CAAU;cACpBC,KAAA,EAAO;cACPC,QAAA,EAAU;cACVC,IAAA,EAAM;YACZ,CAAM;UACD;UAEDL,SAAA,CAAUS,WAAA,GAAcpC,aAAA,CAAc3C,cAAA,CAAe0C,KAAK,EAAEM,EAAA;UAC5DsB,SAAA,CAAUU,aAAA,GAAgBrC,aAAA,CAAc3C,cAAA,CAAe0C,KAAK,EAAE3B,IAAA;QAC9D;QAGD,IAAI6D,WAAA,CAAYE,KAAA,IAAS,QAAQF,WAAA,CAAYE,KAAA,IAAS,MAAM;UAE3D,IAAIR,SAAA,CAAUjE,SAAA,IAAa,GAAG;YAC7B,OAAOP,aAAA,CAAA8D,KAAA,CAAIY,SAAA,CAAU;cACpBC,KAAA,EAAO;cACPC,QAAA,EAAU;cACVC,IAAA,EAAM;YACZ,CAAM;UACD;UAGD,IAAI,CAACL,SAAA,CAAU9D,OAAA,CAAQC,QAAA,EAAU;YAChC,OAAOX,aAAA,CAAA8D,KAAA,CAAIY,SAAA,CAAU;cACpBC,KAAA,EAAO;cACPC,QAAA,EAAU;cACVC,IAAA,EAAM;YACZ,CAAM;UACD;QACD;QAGD,IAAIC,WAAA,CAAYE,KAAA,IAAS,QAAQF,WAAA,CAAYE,KAAA,IAAS,QAAQF,WAAA,CAAYE,KAAA,IAAS,MAAM;UAExF,IAAIR,SAAA,CAAUjE,SAAA,IAAa,GAAG;YAC7B,OAAOP,aAAA,CAAA8D,KAAA,CAAIY,SAAA,CAAU;cACpBC,KAAA,EAAO;cACPC,QAAA,EAAU;cACVC,IAAA,EAAM;YACZ,CAAM;UACD;UAGD,IAAIE,cAAA,CAAe9D,IAAA,IAAQ,IAAI;YAC9B,OAAOjB,aAAA,CAAA8D,KAAA,CAAIY,SAAA,CAAU;cACpBC,KAAA,EAAO;cACPC,QAAA,EAAU;cACVC,IAAA,EAAM;YACZ,CAAM;UACD;UAGD,IAAIC,WAAA,CAAYE,KAAA,IAAS,MAAM;YAE9B,IAAI,CAACR,SAAA,CAAUzD,cAAA,EAAgB;cAC9B,OAAOf,aAAA,CAAA8D,KAAA,CAAIY,SAAA,CAAU;gBACpBC,KAAA,EAAO;gBACPC,QAAA,EAAU;gBACVC,IAAA,EAAM;cACb,CAAO;YACD;UACD;UACDL,SAAA,CAAUW,MAAA,GAASJ,cAAA;QACnB;MACD;MAID,IAAI,CAAC3E,KAAA,CAAMI,GAAA,EAAK;QACf,OAAOR,aAAA,CAAA8D,KAAA,CAAIY,SAAA,CAAU;UACpBC,KAAA,EAAO;UACPC,QAAA,EAAU;UACVC,IAAA,EAAM;QACV,CAAI;MACD;MAEDL,SAAA,CAAUY,YAAA,GAAeN,WAAA,CAAYO,IAAA;MACrCb,SAAA,CAAUc,UAAA,GAAaR,WAAA,CAAY5B,EAAA;MACnCsB,SAAA,CAAUe,YAAA,GAAeT,WAAA,CAAY7D,IAAA;MACrCuD,SAAA,CAAUgB,aAAA,GAAgBV,WAAA,CAAYE,KAAA;MAEtChF,aAAA,CAAY8D,KAAA,CAAAM,KAAA,0CAAAI,SAAA,EAAW,SAAS;MAGhC,IAAI,CAACxE,aAAA,CAAG8D,KAAA,CAAC2B,cAAA,CAAe,OAAO,GAAG;QACjChE,KAAA,CAAMmB,KAAA,CAAM8C,IAAA,CAAK,QAAQ;MAC5B,OAAS;QAENC,WAAA,CAAYnB,SAAS;MACrB;IACD;IAOD,IAAIoB,IAAA,GAAO;IACX,IAAMC,eAAA,GAAkB,SAAlBA,gBAAA,EAAwB;MAE7B,IAAI,CAACnE,WAAA,CAAYkB,KAAA,CAAMhB,KAAA,EAAO;QAC7B,OAAO5B,aAAA,CAAA8D,KAAA,CAAIY,SAAA,CAAU;UACpBC,KAAA,EAAO;UACPC,QAAA,EAAU;UACVC,IAAA,EAAM;QACV,CAAI;MACD;MAGD,IAAIe,IAAA,EAAM;MAGVA,IAAA,GAAO;MAGP,IAAME,KAAA,GAAQC,WAAA,CAAY,YAAM;QAC/B,IAAIlE,SAAA,CAAUe,KAAA,CAAMb,IAAA,IAAQ,GAAG;UAC9BF,SAAA,CAAUe,KAAA,CAAMd,SAAA,GAAY;UAC5BD,SAAA,CAAUe,KAAA,CAAMb,IAAA,GAAO;UACvBiE,aAAA,CAAcF,KAAK;UAEnBF,IAAA,GAAO;QACX,OAAU;UACN/D,SAAA,CAAUe,KAAA,CAAMb,IAAA,IAAQ;UACxBF,SAAA,CAAUe,KAAA,CAAMd,SAAA,kBAAAmE,MAAA,CAAiBpE,SAAA,CAAUe,KAAA,CAAMb,IAAI;QACrD;MACD,GAAE,GAAI;MAGPlC,GAAA,CAAIwC,UAAA,CAAWC,KAAA,CAAMC,OAAA,CAAQ;QAC5BC,GAAA,EAAK;QACL0D,MAAA,EAAQ;QACRzD,IAAA,EAAM;UACLjC,GAAA,EAAKkB,WAAA,CAAYkB,KAAA,CAAMhB;UAAA;QACvB;;QACDc,OAAA,EAAS,SAAAA,QAAAC,GAAA,EAAO;UAEf3C,aAAA,CAAA8D,KAAA,CAAIY,SAAA,CAAU;YACbC,KAAA,EAAO;YACPC,QAAA,EAAU;YACVC,IAAA,EAAM;UACX,CAAK;QACD;QACDR,IAAA,EAAM,SAAAA,KAAA1B,GAAA,EAAO;UACZ3C,aAAA,CAAA8D,KAAA,CAAIY,SAAA,CAAU;YACbC,KAAA,EAAOhC,GAAA,CAAIwD,GAAA;YACXvB,QAAA,EAAU;YACVC,IAAA,EAAM;UACX,CAAK;QACD;MACJ,CAAG;IACD;IAGD,IAAMuB,MAAA,GAAS,SAATA,OAAA,EAAe;MACpB3E,KAAA,CAAMmB,KAAA,CAAMyD,KAAA,EAAO;IACnB;IAGD,IAAMC,EAAA,GAAK,SAALA,GAAA,EAAW;MAEhB,IAAI,CAAC5E,WAAA,CAAYkB,KAAA,CAAMhB,KAAA,IAAS,CAACF,WAAA,CAAYkB,KAAA,CAAMjB,SAAA,EAAW;QAC7D,OAAO3B,aAAA,CAAA8D,KAAA,CAAIY,SAAA,CAAU;UACpBC,KAAA,EAAO;UACPC,QAAA,EAAU;UACVC,IAAA,EAAM;QACV,CAAI;MACD;MAGDhF,GAAA,CAAIwC,UAAA,CAAWC,KAAA,CAAMC,OAAA,CAAQ;QAC5BC,GAAA,EAAK;QACL0D,MAAA,EAAQ;QACRzD,IAAA,EAAM;UACLjC,GAAA,EAAKkB,WAAA,CAAYkB,KAAA,CAAMhB,KAAA;UAAA;UACvByD,IAAA,EAAM3D,WAAA,CAAYkB,KAAA,CAAMjB;UAAA;QACxB;;QACDe,OAAA,EAAS,SAAAA,QAACC,GAAA,EAAQ;UAEjB3C,aAAA,CAAG8D,KAAA,CAACyC,cAAA,CAAe,SAAS5D,GAAA,CAAIF,IAAA,CAAKA,IAAA,CAAK+D,KAAK;UAC/C/E,KAAA,CAAMmB,KAAA,CAAMyD,KAAA,EAAO;UAEnBV,WAAA,CAAYnB,SAAS;QACrB;QACDH,IAAA,EAAM,SAAAA,KAAC1B,GAAA,EAAQ;UACdlB,KAAA,CAAMmB,KAAA,CAAMyD,KAAA,EAAO;UACnBrG,aAAA,CAAA8D,KAAA,CAAIY,SAAA,CAAU;YACbC,KAAA,EAAOhC,GAAA,CAAIwD,GAAA;YACXvB,QAAA,EAAU;YACVC,IAAA,EAAM;UACX,CAAK;QACD;MACJ,CAAG;IACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5nBF4B,EAAA,CAAGC,UAAA,CAAWC,SAAe","ignoreList":[]}