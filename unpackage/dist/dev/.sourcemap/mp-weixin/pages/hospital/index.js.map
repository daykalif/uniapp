{"version":3,"file":"index.js","sources":["pages/hospital/index.vue","pages/hospital/index.vue?type=page"],"sourcesContent":["<template>\r\n\t<view>\r\n\t\t<navbar title-text=\"\" :isHeight=\"false\" :isWhite=\"true\" background=\"none\" @navBarAttached=\"onNavBarAttached\" />\r\n\t\t<view style=\"position: relative;\">\r\n\t\t\t<image :src=\"hospital.avatar_url\" mode=\"aspectFill\"\r\n\t\t\t\tstyle=\"filter: blur(50rpx) brightness(0.8); display: block; width: 100%; height: 550rpx; overflow: hidden\">\r\n\t\t\t</image>\r\n\t\t\t<view\r\n\t\t\t\t:style=\"'position:absolute;top:' + navBarHeight + 'rpx;padding-top:65rpx;overflow:hidden;width:100%;'\">\r\n\t\t\t\t<view class=\"hospital-hd\">\r\n\t\t\t\t\t<view class=\"weui-cell weui-cell_access\" hover-class=\"weui-cell_active\" @tap=\"showShareModal\">\r\n\t\t\t\t\t\t<view class=\"weui-cell__hd\">\r\n\t\t\t\t\t\t\t<image :src=\"hospital.avatar_url\" mode=\"aspectFill\"\r\n\t\t\t\t\t\t\t\tstyle=\"position: absolute; top: -65rpx; display: block; width: 150rpx; height: 135rpx; border-radius: 10rpx; overflow: hidden\">\r\n\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"weui-cell__bd\" style=\"padding-left: 170rpx\">\r\n\t\t\t\t\t\t\t<view style=\"position: absolute; top: -65rpx\">\r\n\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\tstyle=\"font-size: 36rpx; color: #ffffff; font-weight: bold\">{{ hospital.name }}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t<text class=\"hosp-rank\">{{ hospital.rank }}</text>\r\n\t\t\t\t\t\t\t\t<text class=\"hosp-label\">{{ hospital.label }}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"weui-cell__ft weui-cell__ft_in-access\"><text class=\"f4\">转发</text></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"weui-cell weui-cell_access\" hover-class=\"weui-cell_active\" @tap=\"toMap\">\r\n\t\t\t\t\t\t<view class=\"weui-cell__hd\">\r\n\t\t\t\t\t\t\t<image src=\"/static/resource/images/ic_address.png\" mode=\"aspectFill\"\r\n\t\t\t\t\t\t\t\tstyle=\"margin-right: 10rpx; display: block; width: 40rpx; height: 40rpx\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"weui-cell__bd\">\r\n\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\tstyle=\"font-size: 24rpx\">{{ hospital.city }}{{ hospital.district }}{{ hospital.address }}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"weui-cell__ft weui-cell__ft_in-access\"><text class=\"f4\">导航</text></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"hospital-bd\">\r\n\t\t\t\t\t<view class=\"weui-cells serv-list\">\r\n\t\t\t\t\t\t<view class=\"weui-cell serv-item\">\r\n\t\t\t\t\t\t\t<view class=\"weui-cell__bd\">\r\n\t\t\t\t\t\t\t\t<view style=\"padding-top: 10rpx\"><text class=\"serv-name\">在线预约您需要的服务</text></view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"weui-cell__ft\"></view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"weui-cell serv-item\" @tap=\"toService(item.id)\" v-for=\"(item, index) in services\"\r\n\t\t\t\t\t\t\t:key=\"index\">\r\n\t\t\t\t\t\t\t<block v-if=\"item.use_switch == 1\">\r\n\t\t\t\t\t\t\t\t<view class=\"weui-cell__hd\">\r\n\t\t\t\t\t\t\t\t\t<image class=\"serv-logo\"\r\n\t\t\t\t\t\t\t\t\t\t:src=\"item.logo_image ? item.logo_image_url : '../../resource/images/avatar.jpg'\"\r\n\t\t\t\t\t\t\t\t\t\tmode=\"aspectFill\" />\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t<view class=\"weui-cell__bd\">\r\n\t\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"serv-name\">{{ item.name }}</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"serv-line serv-intro\">{{ item.intro }}</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"serv-line\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"serv-price\">{{ item.price }}</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"serv-unit\">元/次</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t<view class=\"weui-cell__ft\">\r\n\t\t\t\t\t\t\t\t\t<button class=\"btn1m\">预约</button>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<share :shareModal=\"clone_shareModal\"></share>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref\r\n\t} from 'vue'\r\n\timport {\r\n\t\tonLoad\r\n\t} from \"@dcloudio/uni-app\"\r\n\r\n\tconst app = getApp()\r\n\t// 医院详情数据\r\n\tconst hospital = ref({})\r\n\t// 医院服务数据\r\n\tconst services = ref({})\r\n\t// 分享弹框\r\n\tconst clone_shareModal = ref(false)\r\n\r\n\tconst navBarHeight = ref('')\r\n\tconst onNavBarAttached = (e) => {\r\n\t\tnavBarHeight.value = e.detail.navBarHeight\r\n\t}\r\n\r\n\tonLoad((option) => {\r\n\t\t// 根据首页传来的医院id获取详情\r\n\t\tgetHospitalDetail(option.hid)\r\n\t})\r\n\r\n\t// 获取医院详情\r\n\tconst getHospitalDetail = (hid) => {\r\n\t\tapp.globalData.utils.request({\r\n\t\t\turl: '/Hospital/index',\r\n\t\t\tmethod: 'GET',\r\n\t\t\tdata: {\r\n\t\t\t\thid\r\n\t\t\t},\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\thospital.value = res.data.hospital // 医院数据\r\n\t\t\t\tservices.value = res.data.services // 服务数据\r\n\t\t\t},\r\n\t\t\tfail: (res) => {\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// 去预约\r\n\tconst toService = (id) => {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: '../service/index?hid=' + hospital.value.id + '&svid=' + id\r\n\t\t})\r\n\t}\r\n\r\n\r\n\t// 显示转发弹框\r\n\tconst showShareModal = () => {\r\n\t\tclone_shareModal.value = !clone_shareModal.value\r\n\t}\r\n\r\n\t// 打开导航的功能【开启导航功能需要在pages.json中开启plugins，当前仅支持企业appId】\r\n\tconst toMap = () => {\r\n\t\t// 1.获取医院坐标\r\n\t\tconst point = bMapTransQQMap(hospital.value.lng, hospital.value.lat);\r\n\t\tconst {\r\n\t\t\tqmap_key: key\r\n\t\t} = uni.getStorageSync('cfg');\r\n\t\tconst referer = app.globalData.name;\r\n\t\tconst endPoint = JSON.stringify({\r\n\t\t\tname: hospital.value.name,\r\n\t\t\tlatitude: point.lat,\r\n\t\t\tlongitude: point.lng,\r\n\t\t});\r\n\t\tuni.navigateTo({\r\n\t\t\turl: 'plugin://routePlan/index?key=' + key + '&referer=' + referer + '&endPoint=' + endPoint +\r\n\t\t\t\t'&navigation=1'\r\n\t\t})\r\n\t}\r\n\r\n\tconst bMapTransQQMap = (lng, lat) => {\r\n\t\tlet x_pi = 3.14159265358979324 * 3000.0 / 180.0;\r\n\t\tlet x = lng - 0.0065;\r\n\t\tlet y = lat - 0.006;\r\n\t\tlet z = Math.sqrt(x * x + y * y) - 0.00002 * Math.sin(y * x_pi);\r\n\t\tlet theta = Math.atan2(y, x) - 0.000003 * Math.cos(x * x_pi);\r\n\t\tlet lngs = z * Math.cos(theta);\r\n\t\tlet lats = z * Math.sin(theta);\r\n\t\treturn {\r\n\t\t\tlng: lngs,\r\n\t\t\tlat: lats\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t@import \"./index.css\";\r\n</style>","import MiniProgramPage from '/Users/daykalif/Desktop/project/pages/hospital/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onLoad","uni","MiniProgramPage"],"mappings":";;;;;;;;;;;;;;;;AA2FC,UAAM,MAAM,OAAQ;AAEpB,UAAM,WAAWA,cAAG,IAAC,EAAE;AAEvB,UAAM,WAAWA,cAAG,IAAC,EAAE;AAEvB,UAAM,mBAAmBA,cAAG,IAAC,KAAK;AAElC,UAAM,eAAeA,cAAG,IAAC,EAAE;AAC3B,UAAM,mBAAmB,CAAC,MAAM;AAC/B,mBAAa,QAAQ,EAAE,OAAO;AAAA,IAC9B;AAEDC,kBAAM,OAAC,CAAC,WAAW;AAElB,wBAAkB,OAAO,GAAG;AAAA,IAC9B,CAAE;AAGD,UAAM,oBAAoB,CAAC,QAAQ;AAClC,UAAI,WAAW,MAAM,QAAQ;AAAA,QAC5B,KAAK;AAAA,QACL,QAAQ;AAAA,QACR,MAAM;AAAA,UACL;AAAA,QACA;AAAA,QACD,SAAS,CAAC,QAAQ;AACjB,mBAAS,QAAQ,IAAI,KAAK;AAC1B,mBAAS,QAAQ,IAAI,KAAK;AAAA,QAC1B;AAAA,QACD,MAAM,CAAC,QAAQ;AACdC,wBAAAA,MAAA,MAAA,OAAA,mCAAY,GAAG;AAAA,QACf;AAAA,MACJ,CAAG;AAAA,IACD;AAGD,UAAM,YAAY,CAAC,OAAO;AACzBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,0BAA0B,SAAS,MAAM,KAAK,WAAW;AAAA,MACjE,CAAG;AAAA,IACD;AAID,UAAM,iBAAiB,MAAM;AAC5B,uBAAiB,QAAQ,CAAC,iBAAiB;AAAA,IAC3C;AAGD,UAAM,QAAQ,MAAM;AAEnB,YAAM,QAAQ,eAAe,SAAS,MAAM,KAAK,SAAS,MAAM,GAAG;AACnE,YAAM;AAAA,QACL,UAAU;AAAA,MACb,IAAMA,cAAG,MAAC,eAAe,KAAK;AAC5B,YAAM,UAAU,IAAI,WAAW;AAC/B,YAAM,WAAW,KAAK,UAAU;AAAA,QAC/B,MAAM,SAAS,MAAM;AAAA,QACrB,UAAU,MAAM;AAAA,QAChB,WAAW,MAAM;AAAA,MACpB,CAAG;AACDA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,kCAAkC,MAAM,cAAc,UAAU,eAAe,WACnF;AAAA,MACJ,CAAG;AAAA,IACD;AAED,UAAM,iBAAiB,CAAC,KAAK,QAAQ;AACpC,UAAI,OAAO,oBAAsB,MAAS;AAC1C,UAAI,IAAI,MAAM;AACd,UAAI,IAAI,MAAM;AACd,UAAI,IAAI,KAAK,KAAK,IAAI,IAAI,IAAI,CAAC,IAAI,OAAU,KAAK,IAAI,IAAI,IAAI;AAC9D,UAAI,QAAQ,KAAK,MAAM,GAAG,CAAC,IAAI,OAAW,KAAK,IAAI,IAAI,IAAI;AAC3D,UAAI,OAAO,IAAI,KAAK,IAAI,KAAK;AAC7B,UAAI,OAAO,IAAI,KAAK,IAAI,KAAK;AAC7B,aAAO;AAAA,QACN,KAAK;AAAA,QACL,KAAK;AAAA,MACL;AAAA,IACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1KF,GAAG,WAAWC,SAAe;"}